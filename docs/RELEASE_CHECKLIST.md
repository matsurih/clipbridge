# リリースチェックリスト

新しいバージョンをリリースする際のチェックリストです。

## リリース前（開発フェーズ）

### コード品質
- [ ] 全てのテストが通過している
- [ ] リントエラーがない
- [ ] コードレビューが完了している
- [ ] セキュリティ脆弱性スキャンを実行
- [ ] パフォーマンステストを実施

### ドキュメント
- [ ] README.mdが最新
- [ ] CHANGELOG.mdを更新
- [ ] 破壊的変更がある場合、マイグレーションガイドを作成
- [ ] API変更がある場合、ドキュメントを更新

### ビルド
- [ ] ローカルでWindows向けビルドが成功
- [ ] ローカルでLinux向けビルドが成功
- [ ] インストーラーが正常に動作

## バージョン更新

### 自動更新（推奨）
```bash
# バージョンアップスクリプトを実行
./scripts/bump-version.sh 0.2.0
```

### 手動更新
- [ ] `package.json` のバージョンを更新
- [ ] `packages/protocol/package.json` のバージョンを更新
- [ ] `packages/core/package.json` のバージョンを更新
- [ ] `packages/desktop/package.json` のバージョンを更新
- [ ] `packages/desktop/src-tauri/Cargo.toml` のバージョンを更新
- [ ] `packages/desktop/src-tauri/tauri.conf.json` のバージョンを更新

## CHANGELOG更新

```markdown
## [0.x.0] - YYYY-MM-DD

### Added
- 新機能

### Changed
- 変更内容

### Fixed
- バグ修正

### Security
- セキュリティ修正
```

## Git操作

```bash
# 1. ブランチが最新であることを確認
git checkout main
git pull origin main

# 2. 変更をコミット
git add .
git commit -m "chore: bump version to 0.x.0"

# 3. タグを作成
git tag v0.x.0

# 4. プッシュ
git push origin main
git push origin v0.x.0
```

## GitHub Actions確認

- [ ] GitHub Actionsのビルドジョブが開始された
- [ ] Linuxビルドが成功
- [ ] Windowsビルドが成功
- [ ] アーティファクトが正しくアップロードされた
- [ ] ドラフトリリースが作成された

## リリース公開前

### ダウンロード可能ファイルの確認
- [ ] Windows `.msi` インストーラー
- [ ] Linux `.deb` パッケージ
- [ ] （将来）Linux `.AppImage`
- [ ] （将来）macOS `.dmg`

### インストールテスト
- [ ] Windowsでインストーラーを実行
- [ ] Linuxで.debパッケージをインストール
- [ ] アプリケーションが正常に起動
- [ ] 基本機能が動作
- [ ] クリップボード同期が動作

### リリースノート編集
- [ ] 自動生成されたリリースノートを確認
- [ ] 主要な変更点を追加
- [ ] スクリーンショットを追加（UI変更がある場合）
- [ ] 既知の問題を記載
- [ ] アップグレード手順を記載（破壊的変更がある場合）

## リリース公開

### GitHub
- [ ] ドラフトリリースを確認
- [ ] "Publish release" をクリック
- [ ] リリースが公開されたことを確認

### コミュニケーション
- [ ] リリースアナウンスを作成
- [ ] 必要に応じてSNSで告知
- [ ] ドキュメントサイトを更新（将来）

## リリース後

### モニタリング
- [ ] ダウンロード数を確認
- [ ] 新しいIssueをチェック
- [ ] クラッシュレポートを確認（将来）
- [ ] ユーザーフィードバックを収集

### 緊急修正が必要な場合
```bash
# パッチバージョンを作成
./scripts/bump-version.sh 0.x.1

# 修正を適用
git add .
git commit -m "fix: critical bug"
git tag v0.x.1
git push origin main
git push origin v0.x.1
```

## リリースタイプ別ガイドライン

### パッチリリース (0.1.0 → 0.1.1)
- バグ修正のみ
- セキュリティパッチ
- ドキュメント修正
- **破壊的変更なし**

### マイナーリリース (0.1.0 → 0.2.0)
- 新機能追加
- パフォーマンス改善
- 非推奨機能の追加
- **後方互換性を保つ**

### メジャーリリース (0.9.0 → 1.0.0)
- 破壊的変更
- APIの大幅な変更
- アーキテクチャの変更
- マイグレーションガイド必須

## プレリリース

### アルファ版 (0.2.0-alpha.1)
- 開発中の機能
- 不安定
- 内部テスト用

### ベータ版 (0.2.0-beta.1)
- 機能完成
- バグ修正中
- 外部テスター向け

### リリース候補 (0.2.0-rc.1)
- 本番前の最終確認
- 重大なバグがなければリリース

```bash
# プレリリースタグの作成
git tag v0.2.0-alpha.1
git push origin v0.2.0-alpha.1
```

## トラブルシューティング

### ビルドが失敗した場合
1. GitHub Actionsのログを確認
2. ローカルで同じビルドを試す
3. 依存関係のバージョンを確認
4. キャッシュをクリアして再実行

### タグを間違えた場合
```bash
# ローカルのタグを削除
git tag -d v0.x.0

# リモートのタグを削除
git push --delete origin v0.x.0

# 正しいタグを作成
git tag v0.x.0
git push origin v0.x.0
```

### リリースを取り消す場合
1. GitHubでリリースを削除
2. タグを削除（上記参照）
3. 必要に応じてバージョンをロールバック

## 次のリリースに向けて

- [ ] リリース後のフィードバックを収集
- [ ] 次のバージョンのマイルストーンを作成
- [ ] 優先度の高いIssueを特定
- [ ] ロードマップを更新
